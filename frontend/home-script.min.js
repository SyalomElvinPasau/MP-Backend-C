const profileIcon=document.getElementById("profile"),profileMenu=document.getElementById("profileMenu"),closeProfileMenu=document.getElementById("closeProfileMenu");profileIcon.addEventListener("click",(()=>{profileMenu.classList.remove("closed"),console.log("clicked")})),closeProfileMenu.addEventListener("click",(()=>{profileMenu.classList.add("closed")}));const items=document.querySelectorAll(".comment");items.forEach((e=>{e.addEventListener("click",(()=>{window.location.href="compose-comment.html"}))})),document.addEventListener("click",(async e=>{const t=e.target.closest(".delete-btn");if(!t)return;const o=t.dataset.id;if(!o)return console.log("No postId found on button");try{const e=await fetch(`/delete-post?id=${o}`,{method:"DELETE"});if(e.ok){const e=t.closest(".post");e&&e.remove()}else{const t=await e.text();alert(`Failed to delete post: ${t}`)}}catch(e){console.error(e),alert("Error deleting post")}})),document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll(".like-btn").forEach((e=>{e.addEventListener("click",(async e=>{const t=e.target.dataset.postId,o=await fetch(`/like-post?postId=${t}`,{method:"POST"}),n=await o.json();e.target.src=n.liked?"/icon/heart-filled.png":"/icon/heart.png",e.target.nextElementSibling.textContent=n.likes}))}))}));const postButton=document.getElementById("postButton");postButton.addEventListener("click",(()=>{const e=document.getElementById("textArea"),t=document.getElementById("addPhoto"),o=new FormData;o.append("content",e.value),t.files.length>0&&o.append("image",t.files[0]),fetch("/create-post",{method:"POST",body:o}).then((e=>e.json())).then((e=>{e.message?(console.log("Success:",e),window.location.reload()):console.error("Server Error:",e)})).catch((e=>{console.error("Error creating post:",e)}))}));